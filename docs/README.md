# 기능요구사항

## 1단계

- [x] 역 dao 수정하기
    - [x] 같은 이름을 갖는 지하철역 생성 불가
  - [x] 노선 dao 구현하기

  - [x] Dao에서 List 이용하기
  - [x] 노선 생성하기
    - [x] 같은 이름 노선 생성 불가
  - [x] 노선 목록 조회하기
  - [x] 노선 조회하기
    - [x] 없는 노선 조회시 에러
  - [x] 노선 수정하기
  - [x] 노선 삭제하기

- [x] 노선 API 만들기

  - [x] 노선 생성
  - [x] 노선 생성 중복
  - [x] 노선 목록 조회
  - [x] 노선 조회
  - [x] 노선 수정
  - [x] 노선 삭제

- [x] 단위 테스트 작성하기
- [x] End To End 테스트 작성하기
- [x] @Service, @Component 등 스프링 빈 사용금지
  - [x] Factory 이용해서 만들기
  - [x] 싱글턴 패턴 적용하기
  
## 2단계
- [x] gradle 의존성 추가하기
- [x] h2 데이터베이스 설정
- [x] h2 스키마 설정
- [x] 스프링 컨테이너로 객체관리하기
- [x] JDBC 활용하는 코드로 변경

# 3단계 
- [x] 지하철 노선 추가 API 수정 
  - 상행 종점, 하행 종점, 거리 정보를 추가로 입력받음 
    - 등록된 역만 추가할 수 있어야함 
    - 거리는 0보다 커야함 
  - 입력받은 상행 종점, 하행 종점으로 구간(section) 정보도 함께 등록
  
- [] 지하철 구간 추가 API 구현
  - 상행 종점 등록
  - 하행 종점 등록 
  - 갈래길 방지(역간에 역 삽입)    
    - 역 사이에 역을 등록할경우 기존 역 사이 길이보다 크면 등록 x
  - 상행역과 하행역이 이미 노선에 등록되어 있으면 추가할 수 없음
  - 구간의 상행역과 하행역이 노선에 둘 다 노선에 포함되지 않는 역이라면, 구간추가 불가
  
- [] 지하철 노선 조회 API 수정
  - 노선의 구간 정보를 바탕으로 상행 종점 ~ 하행 종점까지 역 목록을 응답한다.(순서대)
  
- [] 지하철 구간 제거 API 구현
    - 종점이 제거될 경우 다음역이 종점이 됨
    - A - B - 역이 연결되어 있을경우 B역을 제거하면 A - C로 재배치됨 
    - 구간이 하나인 노선에서 구간을 제거할 수 없음 
  

### 해야할 것 
- given, when, then에 맞춰서 테스트 코드 구현하기
- 인수 테스트시 예외 메세지도 확인하기 